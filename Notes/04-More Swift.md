## 知识点

####  mutating的使用
在Swift中，使用值类型结构时，对于可能改变内部属性的方法，我们需要标记该方法为mutating的，因为**值类型是写时复制的**。同理可得，引用类型在同样的场景中可不加mutating关键字。

相关的思考：
* 为什么计算属性和存储属性（var）不需要标记mutating关键字呢——因为Swift知道部分var是writeable的（对于存储属性、属性观察器和带set的计算属性）
* 什么时候需要值类型，而不是引用类型

#### 协议的使用
协议是一个变量和函数的列表，并非实现，而只是一个列表。借助协议，我们可以传递API



协议的组成：

* 协议的声明
* 协议的定义：只有方法和变量的声明部分
* 协议的实现：推荐通过为结构类型添加扩展实现

协议的特点

* 只是声明函数和计算变量，而不负责实现。
* 多继承和多重继承
* 可能改变自身的方法需标记为`mutating`
* 协议可以添加`require init`方法，继承该协议的结构需实现该`init`方法
* 由于Objective-C的特点，可以实现可选的方法。纯Swift也可以通过不同的实现达到同样的目的，但要求该协议仅作用于`class`



相关的思考:

* `String`为什么使用`index`而不是`Int`类型作为索引？

  String是由Unicode组成的，四个字符可能由五个Unicode组成

* 协议的多继承的作用是什么？

* 不要轻易使用`Any`类型，因为`Swift`是强类型语言



### NSAttributeString

NSAttributeStrng内部是由NSString构建，所以对于emoji或一些特殊字符，索引表现不是很准确，与String的索引结果可能不一样。



### 函数类型

在Swift中，函数是一等公民，可以作为函数参数，变量类型等。

#### Closure（闭包）

闭包是引用类型，使用闭包可以简化代码，避免声明过多的函数或方法。



使用闭包的场景：

* 经常作为函数的参数
* 提供自定义的代码实现，在捕获到错误或异步操作完成时
* 重复做某个操作，例如`map`，`fliter`等高级函数
* 使用闭包初始化属性，使代码以块状分布，结构更清晰

相关的思考：

* 如何避免闭包引起的循环引用